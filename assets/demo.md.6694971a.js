import{d as D,c as g,r as d,o as X,a as Y,b as k,e as x,f as u,g as b,n as F,u as a,h as Q,i as tt,F as et,w as V,j as _,t as $,p as rt,k as c,l,m as nt}from"./app.73ffecad.js";var st=Object.defineProperty,at=(e,t,r)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t,r)=>(at(e,typeof t!="symbol"?t+"":t,r),r),w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot="Expected a function",R="__lodash_hash_undefined__",W=1/0,it="[object Function]",lt="[object GeneratorFunction]",ut="[object Symbol]",ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/,ft=/^\./,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pt=/[\\^$.*+?()[\]{}|]/g,dt=/\\(\\)?/g,vt=/^\[object .+?Constructor\]$/,mt=typeof w=="object"&&w&&w.Object===Object&&w,yt=typeof self=="object"&&self&&self.Object===Object&&self,j=mt||yt||Function("return this")();function gt(e,t){return e==null?void 0:e[t]}function bt(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var Et=Array.prototype,wt=Function.prototype,U=Object.prototype,O=j["__core-js_shared__"],N=function(){var e=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),M=wt.toString,P=U.hasOwnProperty,Z=U.toString,kt=RegExp("^"+M.call(P).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=j.Symbol,xt=Et.splice,St=G(j,"Map"),E=G(Object,"create"),q=H?H.prototype:void 0,L=q?q.toString:void 0;function v(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function zt(){this.__data__=E?E(null):{}}function Ot(e){return this.has(e)&&delete this.__data__[e]}function At(e){var t=this.__data__;if(E){var r=t[e];return r===R?void 0:r}return P.call(t,e)?t[e]:void 0}function Ct(e){var t=this.__data__;return E?t[e]!==void 0:P.call(t,e)}function $t(e,t){var r=this.__data__;return r[e]=E&&t===void 0?R:t,this}v.prototype.clear=zt;v.prototype.delete=Ot;v.prototype.get=At;v.prototype.has=Ct;v.prototype.set=$t;function y(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function jt(){this.__data__=[]}function Pt(e){var t=this.__data__,r=S(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():xt.call(t,r,1),!0}function Tt(e){var t=this.__data__,r=S(t,e);return r<0?void 0:t[r][1]}function It(e){return S(this.__data__,e)>-1}function Bt(e,t){var r=this.__data__,n=S(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}y.prototype.clear=jt;y.prototype.delete=Pt;y.prototype.get=Tt;y.prototype.has=It;y.prototype.set=Bt;function m(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ft(){this.__data__={hash:new v,map:new(St||y),string:new v}}function Vt(e){return z(this,e).delete(e)}function Nt(e){return z(this,e).get(e)}function Ht(e){return z(this,e).has(e)}function qt(e,t){return z(this,e).set(e,t),this}m.prototype.clear=Ft;m.prototype.delete=Vt;m.prototype.get=Nt;m.prototype.has=Ht;m.prototype.set=qt;function S(e,t){for(var r=e.length;r--;)if(Xt(e[r][0],t))return r;return-1}function Lt(e,t){t=Ut(t,e)?[t]:Wt(t);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Jt(t[r++])];return r&&r==n?e:void 0}function Dt(e){if(!K(e)||Zt(e))return!1;var t=Yt(e)||bt(e)?kt:vt;return t.test(Kt(e))}function Rt(e){if(typeof e=="string")return e;if(I(e))return L?L.call(e):"";var t=e+"";return t=="0"&&1/e==-W?"-0":t}function Wt(e){return J(e)?e:Gt(e)}function z(e,t){var r=e.__data__;return Mt(t)?r[typeof t=="string"?"string":"hash"]:r.map}function G(e,t){var r=gt(e,t);return Dt(r)?r:void 0}function Ut(e,t){if(J(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||I(e)?!0:ht.test(e)||!ct.test(e)||t!=null&&e in Object(t)}function Mt(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Zt(e){return!!N&&N in e}var Gt=T(function(e){e=te(e);var t=[];return ft.test(e)&&t.push(""),e.replace(_t,function(r,n,s,o){t.push(s?o.replace(dt,"$1"):n||r)}),t});function Jt(e){if(typeof e=="string"||I(e))return e;var t=e+"";return t=="0"&&1/e==-W?"-0":t}function Kt(e){if(e!=null){try{return M.call(e)}catch{}try{return e+""}catch{}}return""}function T(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(ot);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=r.cache;if(o.has(s))return o.get(s);var i=e.apply(this,n);return r.cache=o.set(s,i),i};return r.cache=new(T.Cache||m),r}T.Cache=m;function Xt(e,t){return e===t||e!==e&&t!==t}var J=Array.isArray;function Yt(e){var t=K(e)?Z.call(e):"";return t==it||t==lt}function K(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Qt(e){return!!e&&typeof e=="object"}function I(e){return typeof e=="symbol"||Qt(e)&&Z.call(e)==ut}function te(e){return e==null?"":Rt(e)}function ee(e,t,r){var n=e==null?void 0:Lt(e,t);return n===void 0?r:n}var A=ee;class re{constructor(t,r){h(this,"options"),h(this,"path"),h(this,"_tree"),h(this,"_currentEl"),h(this,"_level"),h(this,"_rootEl"),h(this,"_wrapperEl"),h(this,"_rootClass"),h(this,"_rootStyle"),h(this,"_wrapperStyle"),h(this,"_height"),h(this,"_resizeObserver"),h(this,"_mutationObserver"),h(this,"_unwatchCurrentEl"),h(this,"_unwatchPath"),h(this,"focusEls",'*:is(button, a, input, select, textarea, [tabindex]):not([tabindex="-1"])'),this.options=t,this.path=r,this._tree=d(null),this._currentEl=d(null),this._height=d(0),this._level=g(()=>this.path.value.length),this._rootEl=null,this._wrapperEl=null,this._resizeObserver=null,this._mutationObserver=null,this._unwatchCurrentEl=V(this._currentEl,()=>{this.getHeightWithOptions()}),this._unwatchPath=V(this.path,()=>{this.updateWithPath()},{deep:!0}),this._rootClass=g(()=>{const n=[`zavant--level-${this.level}`];return t.dynamicHeight&&n.push("zavant--dynamic-height"),n}),this._rootStyle=g(()=>({height:this._height.value?`${this._height.value}px`:""})),this._wrapperStyle=g(()=>({transform:`translateX(${a(this._level)*-100}%)`}))}init(t){const r=a(t);!r||(this._rootEl=r,this._wrapperEl=this._rootEl.querySelector(".zavant__menu"),this.currentEl=this._wrapperEl,this.update(),this.updateWithPath(!0),typeof ResizeObserver<"u"&&typeof MutationObserver<"u"&&(this._resizeObserver=new ResizeObserver(()=>this.getHeightWithOptions()),this._mutationObserver=new MutationObserver(()=>{this.update()}),this._resizeObserver.observe(r),this._mutationObserver.observe(r,{childList:!0})),this.initAccessibility(r))}initAccessibility(t){t.addEventListener("keydown",r=>{switch(r.key){case"ArrowUp":case"Up":this.focusSibling("previous");break;case"ArrowDown":case"Down":this.focusSibling("next");break;case"ArrowLeft":case"Left":case"Esc":case"Escape":this.back();break;case"ArrowRight":case"Right":{const n=document.activeElement;n&&n.classList.contains("zavant__next")&&this.next(n);break}case"Home":case"PageUp":this.focusFirst();break;case"End":case"PageDown":this.focusLast();break;default:this.focusChar(r.key);break}})}destroy(){this._resizeObserver&&this._resizeObserver.disconnect(),this._mutationObserver&&this._mutationObserver.disconnect(),this._unwatchCurrentEl(),this._unwatchPath()}update(){if(!this._wrapperEl)return;const t=this.createTree({el:this._wrapperEl,children:[]});this.tree=t,this.getHeightWithOptions()}updateFocusableElements(){!this.currentEl||!this._rootEl||(Array.from(this._rootEl.getElementsByTagName("*")).forEach(t=>t.setAttribute("tabindex","-1")),Array.from(this.currentEl.getElementsByTagName("*")).forEach(t=>t.removeAttribute("tabindex")),this.currentEl.removeAttribute("tabindex"),Array.from(this.currentEl.querySelectorAll(":scope .zavant__menu *")).forEach(t=>t.setAttribute("tabindex","-1")))}focusFirst(){var t,r;const n=(t=this.currentEl)==null?void 0:t.querySelector(this.focusEls);n&&n.focus(),(r=this._rootEl)==null||r.scrollTo(0,0)}focusLast(){if(!this.currentEl)return;const t=Array.from(this.currentEl.querySelectorAll(":scope > *"));for(let r=t.length-1;r>=0;r--){const n=t[r].querySelector(this.focusEls);if(n){n.focus();return}}}focusSibling(t){const r=document.activeElement;if(!r||!this.currentEl)return this.focusFirst();const n=r.closest(".zavant__item"),s=Array.from(this.currentEl.querySelectorAll(":scope > *")),o=s.findIndex(i=>n===i);if(o===-1)return this.focusFirst();if(t==="next"&&o===s.length-1)return this.focusFirst();if(t==="previous"&&o===0)return this.focusLast();for(let i=t==="next"?o+1:o-1;t==="next"?i<s.length:i>=0;t==="next"?i++:i--){const p=s[i].querySelector(this.focusEls);if(p){p.focus();return}}return t==="next"?this.focusFirst():this.focusLast()}focusChar(t){if(!this.currentEl)return;const r=Array.from(this.currentEl.querySelectorAll(":scope > *"));for(let n=0;n<r.length;n++){const s=r[n].querySelector(this.focusEls);if(s&&s.textContent&&s.textContent.trim().toLowerCase()[0]===t){s.focus();return}}}createTree(t){const r=t.el.children,n=[];for(let s=0;s<r.length;s++){const o=r[s].querySelector(".zavant__menu");!o||n.push(this.createTree({el:o,children:[]}))}return t.children=n,t}getHeightWithOptions(){let t=0;if(this.options.dynamicHeight===!0&&this.currentEl)t=this.currentEl.clientHeight;else if(this.tree){const r=this.tree.el.getElementsByClassName("zavant__menu");t=this.tree.el.clientHeight;for(let n=0;n<r.length;n++){const s=r[n];s.clientHeight>t&&(t=s.clientHeight)}this.height=t}this.height=t}treePath(t=a(this.path)){const r=[];for(let n=0;n<t.length;n++){const s=t[n]-1;r.push("children"),r.push(s.toString())}return r}updateWithPath(t=!1){var r;if(!this.tree)return;const n=this.level?A(this.tree,this.treePath()).el:this.tree.el;Array.from(document.getElementsByClassName("zavant__next")).forEach(i=>i.setAttribute("aria-expanded","false"));const s=a(this.path),o=[];for(let i=0;i<s.length;i++){const p=s[i];o.push(p);const B=(this.level?A(this.tree,this.treePath(o)).el:this.tree.el).previousElementSibling;!B||B.setAttribute("aria-expanded","true")}this.currentEl=n,this.updateFocusableElements(),t||((r=this.currentEl)==null||r.focus(),this.focusFirst())}next(t){if(!this.tree)return;const r=typeof t=="object"&&"target"in t?t.target:t;if(!r)return;const n=r.tagName==="BUTTON"?r:r.closest("button");if(!n)return;const s=n.nextElementSibling;if(!s)return;const o=(this.level?A(this.tree,this.treePath()).children:this.tree.children).findIndex(p=>s===p.el);if(o===-1)return;const i=this.path.value;i.push(o+1),this.path.value=i}back(){if(!this.tree||a(this.level)===0)return;const t=this.path.value;t.pop(),this.path.value=t}set tree(t){this._tree.value=t}get tree(){return a(this._tree)}set currentEl(t){this._currentEl.value=t}get currentEl(){return a(this._currentEl)}set height(t){this._height.value=t}get height(){return a(this._height)}get level(){return a(this._level)}get rootClass(){return a(this._rootClass)}get rootStyle(){return a(this._rootStyle)}get wrapperStyle(){return a(this._wrapperStyle)}}const ne=D({__name:"ZAvant",props:{dynamicHeight:{type:Boolean,default:!1},back:{default:"Back"},modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,n=g({get(){return r.modelValue?r.modelValue:d([]).value},set(i){t("update:modelValue",i||d([]).value)}}),s=new re(r,n);rt("ZAvant",s);const o=d(null);return X(()=>{s.init(o)}),Y(()=>{s.destroy()}),(i,p)=>(k(),x("nav",{class:Q(["zavant",a(s).rootClass]),ref_key:"root",ref:o,style:F(a(s).rootStyle)},[u("ul",{class:"zavant__menu zavant__menu--wrapper",role:"menubar",style:F(a(s).wrapperStyle),"aria-multiselectable":"false","aria-orientation":"vertical"},[b(i.$slots,"default")],4)],6))}}),se=["aria-controls"],ae=["id"],oe={role:"none",class:"zavant__item zavant__item--back"},C=D({__name:"ZAvantMenu",props:{next:null,back:null},setup(e){const t=e,r=tt("ZAvant");return(n,s)=>(k(),x(et,null,[u("button",{onClick:s[0]||(s[0]=(...o)=>a(r).next&&a(r).next(...o)),class:"zavant__next",role:"menuitem","aria-haspopup":"true","aria-expanded":"false","aria-controls":`zavant-menu-${n.$.uid}`},[b(n.$slots,"next",{role:"menuitem"},()=>[_($(t.next),1)])],8,se),u("ul",{id:`zavant-menu-${n.$.uid}`,class:"zavant__menu",role:"menu"},[u("li",oe,[u("button",{onClick:s[1]||(s[1]=(...o)=>a(r).back&&a(r).back(...o)),class:"zavant__back",role:"menuitem"},[b(n.$slots,"back",{},()=>[_($(t.back||a(r).options.back),1)])])]),b(n.$slots,"default")],8,ae)],64))}}),ie=(e,t)=>{const r=e.__vccOpts||e;for(const[n,s]of t)r[n]=s;return r},le={},ue={class:"zavant__item",role:"none"};function ce(e,t){return k(),x("li",ue,[b(e.$slots,"default")])}const f=ie(le,[["render",ce]]);const he=nt('<p><a href="/" class="back">Go back to the documentation</a></p><p>This is a demo of ZoomAvant with all props/slots. It uses custom <a href="/zoom-avant/guide/styles.html">styles</a> and also it is <a href="/zoom-avant/guide/usage.html#control-programatically">Control programatically</a> thanks to <code>v-model</code>.</p><p>You can check on StackBlitz a lighter demo for <a href="https://stackblitz.com/edit/playground-zavant-vue?file=src/App.vue" target="_blank" rel="noreferrer">Vue</a> and <a href="https://stackblitz.com/edit/playground-zavant-nuxt?file=nuxt.config.ts" target="_blank" rel="noreferrer">Nuxt</a>.</p>',3),fe={class:"demo"},_e={class:"demo__zavant"},pe=u("span",null,"Item 2 3",-1),de=u("span",null,"Back to 1",-1),ve=u("a",{href:"#"},"Item 2 4",-1),me=u("a",{href:"#"},"Item 2 5",-1),ye=u("a",{href:"#"},"Item 0 3",-1),Ee=JSON.parse('{"title":"Demo","description":"","frontmatter":{"title":"Demo","layout":false},"headers":[],"relativePath":"demo.md"}'),ge={name:"demo.md"},we=Object.assign(ge,{setup(e){const t=d();return(r,n)=>(k(),x("div",null,[he,u("div",fe,[u("p",null,"Path of the v-model : "+$(t.value),1),u("div",_e,[c(a(ne),{"dynamic-height":!0,modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value=s)},{default:l(()=>[c(a(f),null,{default:l(()=>[c(a(C),{next:"Item 0 1"},{default:l(()=>[c(a(f),null,{default:l(()=>[_("Item 1 1")]),_:1}),c(a(f),null,{default:l(()=>[_("Item 1 2")]),_:1}),c(a(f),null,{default:l(()=>[_("Item 1 3")]),_:1})]),_:1})]),_:1}),c(a(f),null,{default:l(()=>[c(a(C),{next:"Item 0 2",back:"Back to root"},{default:l(()=>[c(a(f),null,{default:l(()=>[_("Item 2 1")]),_:1}),c(a(f),null,{default:l(()=>[_("Item 2 2")]),_:1}),c(a(f),null,{default:l(()=>[_("Item 2 2")]),_:1}),c(a(f),null,{default:l(()=>[c(a(C),null,{next:l(()=>[pe]),back:l(()=>[de]),default:l(()=>[c(a(f),null,{default:l(()=>[ve]),_:1}),c(a(f),null,{default:l(()=>[me]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c(a(f),null,{default:l(()=>[ye]),_:1})]),_:1},8,["modelValue"])]),u("p",null,[u("button",{onClick:n[1]||(n[1]=s=>t.value.pop())},"Back button outside")]),u("p",null,[u("button",{onClick:n[2]||(n[2]=s=>t.value=[2,1])},"Go to [2, 1]")])])]))}});export{Ee as __pageData,we as default};
